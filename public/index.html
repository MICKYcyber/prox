<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Auto Launch Proxy Browser</title>
<style>
html, body { margin:0; padding:0; height:100%; width:100%; overflow:hidden; font-family:"Segoe UI",Arial,sans-serif; background:#121212; color:#fff; }
#tabs { display:flex; background:#1a1a1a; border-bottom:1px solid #333; overflow:hidden; white-space:nowrap; padding:4px; flex-shrink:0; }
.tab { padding:8px 20px; background:#2b2b2b; color:#ccc; cursor:pointer; border-radius:20px 20px 0 0; margin-right:4px; display:flex; align-items:center; position:relative; flex-shrink:0; }
.tab.active { background:#121212; color:#fff; font-weight:bold; }
.tab .closeBtn { margin-left:8px; background:#555; border:none; border-radius:50%; width:16px; height:16px; font-size:12px; color:#fff; cursor:pointer; }
.tab .closeBtn:hover { background:#f44336; }
#toolbar { display:flex; align-items:center; padding:6px; background:#1e1e1e; border-bottom:1px solid #333; flex-shrink:0; }
#search { flex:1; padding:8px 12px; font-size:14px; border:none; border-radius:20px; background:#2c2c2c; color:#fff; outline:none; }
#goBtn,#newTabBtn { margin-left:6px; padding:8px 14px; font-size:14px; border:none; border-radius:4px; background:#333; color:#fff; cursor:pointer; }
#goBtn:hover,#newTabBtn:hover { background:#444; }
#view { flex:1; background:#000; display:flex; flex-direction:column; overflow:hidden; }
iframe, img, embed { width:100%; height:100%; border:none; display:block; object-fit:contain; }
</style>
</head>
<body>
<script>
window.addEventListener("DOMContentLoaded", () => {
  const newWin = window.open("about:blank", "_blank");
  if(!newWin) return;
  const doc = newWin.document;

  doc.write(`<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lincoln's Proxy</title>
<style>
html, body { margin:0; padding:0; height:100%; width:100%; overflow:hidden; font-family:"Segoe UI",Arial,sans-serif; background:#121212; color:#fff; }
#tabs { display:flex; background:#1a1a1a; border-bottom:1px solid #333; overflow:hidden; white-space:nowrap; padding:4px; flex-shrink:0; }
.tab { padding:8px 20px; background:#2b2b2b; color:#ccc; cursor:pointer; border-radius:20px 20px 0 0; margin-right:4px; display:flex; align-items:center; position:relative; flex-shrink:0; }
.tab.active { background:#121212; color:#fff; font-weight:bold; }
.tab .closeBtn { margin-left:8px; background:#555; border:none; border-radius:50%; width:16px; height:16px; font-size:12px; color:#fff; cursor:pointer; }
.tab .closeBtn:hover { background:#f44336; }
#toolbar { display:flex; align-items:center; padding:6px; background:#1e1e1e; border-bottom:1px solid #333; flex-shrink:0; }
#search { flex:1; padding:8px 12px; font-size:14px; border:none; border-radius:20px; background:#2c2c2c; color:#fff; outline:none; }
#goBtn,#newTabBtn { margin-left:6px; padding:8px 14px; font-size:14px; border:none; border-radius:4px; background:#333; color:#fff; cursor:pointer; }
#goBtn:hover,#newTabBtn:hover { background:#444; }
#view { flex:1; background:#000; display:flex; flex-direction:column; overflow:hidden; }
iframe, img, embed { width:100%; height:100%; border:none; display:block; object-fit:contain; }
</style>
</head>
<body>
<div id="tabs"></div>
<div id="toolbar">
<input id="search" placeholder="Search Google or type a URL">
<button id="goBtn">Go</button>
<button id="newTabBtn">+</button>
</div>
<div id="view"></div>
<script>
const PROXY_BASE="https://prox-khzr.onrender.com/proxy?url=";
const tabs=[];
const tabsDiv=document.getElementById("tabs");
const view=document.getElementById("view");
let activeTab=null;

function activateTab(tab){
  tabs.forEach(t=>{
    t.element.style.display="none";
    t.tabBtn.classList.remove("active");
  });
  tab.element.style.display="block";
  tab.tabBtn.classList.add("active");
  activeTab=tab;
}

function createTab(url){
  let element;
  if(url.match(/\\.(jpeg|jpg|gif|png|svg)$/i)) element=document.createElement("img");
  else if(url.match(/\\.pdf$/i)) element=document.createElement("embed");
  else element=document.createElement("iframe");
  element.src=PROXY_BASE+encodeURIComponent(url);
  element.style.display="none";
  view.appendChild(element);

  const tabBtn=document.createElement("div");
  tabBtn.className="tab";
  const titleSpan=document.createElement("span");
  titleSpan.textContent=url;
  const closeBtn=document.createElement("button");
  closeBtn.className="closeBtn";
  closeBtn.textContent="Ã—";
  closeBtn.onclick=e=>{
    e.stopPropagation();
    const idx=tabs.findIndex(t=>t.tabBtn===tabBtn);
    if(idx!==-1) tabs.splice(idx,1);
    element.remove(); tabBtn.remove();
    if(activeTab===tabs[idx]) activateTab(tabs[tabs.length-1]||{element:null,tabBtn:null});
  };
  tabBtn.appendChild(titleSpan);
  tabBtn.appendChild(closeBtn);
  tabBtn.onclick=()=>activateTab({element,tabBtn});
  tabsDiv.appendChild(tabBtn);

  const tab={element,tabBtn};
  tabs.push(tab);
  activateTab(tab);
}

document.getElementById("newTabBtn").onclick=()=>createTab("https://www.google.com");
document.getElementById("goBtn").onclick=()=>{
  const val=document.getElementById("search").value;
  if(val) createTab(val);
};
createTab("https://www.google.com");
</script>
</body>
</html>`);
  doc.close();
});
</script>
</body>
</html>
